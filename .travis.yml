dist: trusty
sudo: required
language: node_js
node_js:
  - node
addons:
  apt:
    sources:
      - mysql-5.7-trusty
    packages:
      - mysql-server
before_install:
  - wget https://dev.mysql.com/get/Downloads/MySQLGUITools/mysql-utilities_1.6.5-1ubuntu14.04_all.deb
  - sudo dpkg -i mysql-utilities_1.6.5-1ubuntu14.04_all.deb
  - sudo mysql_upgrade
  - sudo service mysql restart
  - mysql -e 'CREATE USER 'queue'@'localhost'; GRANT ALL PRIVILEGES ON *.* TO 'queue'@'localhost'; CREATE DATABASE queue;'
script:
  - npm run build
  - ./tools/diff_databases.sh
  - npm run test
  - npm run lint-js
  - npm run prettier-diff
cache:
  directories:
    - "node_modules"
